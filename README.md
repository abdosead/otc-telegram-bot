# بوت OTC للوساطة الآمنة في التليجرام

## نظرة عامة

بوت OTC (Over-The-Counter) هو نظام وساطة متقدم مصمم خصيصاً لتأمين الصفقات التجارية عبر تطبيق التليجرام. يوفر البوت بيئة آمنة وموثوقة للتداول بين الأفراد مع حماية شاملة للأموال ونظام إدارة نزاعات متطور.

## الميزات الرئيسية

### 🔒 الأمان والحماية
- **محفظة آمنة مؤقتة**: حماية الأموال حتى إتمام الصفقة بنجاح
- **نظام كشف الاحتيال**: مراقبة تلقائية للأنشطة المشبوهة
- **تشفير البيانات**: حماية جميع المعلومات الحساسة
- **سجل أمان مفصل**: تتبع جميع العمليات والأحداث

### 💰 نظام الدفع المتقدم
- **دعم CCPayments**: تكامل مع أكثر من 900 عملة رقمية
- **خيارات دفع متعددة**: USDT، Bitcoin، وعملات أخرى
- **شبكات متنوعة**: Polygon، Ethereum، وشبكات أخرى
- **تحقق تلقائي**: مراقبة المدفوعات كل 30 ثانية

### ⚖️ نظام إدارة النزاعات
- **8 أسباب نزاع**: تغطية شاملة لجميع المشاكل المحتملة
- **حل سريع**: فريق دعم متخصص لحل النزاعات
- **تقييمات المستخدمين**: نظام تقييم من 1-5 نجوم
- **شفافية كاملة**: تتبع حالة النزاع في الوقت الفعلي

### 🤖 واجهة ذكية
- **أوامر بديهية**: تفاعل سهل ومفهوم
- **إشعارات فورية**: تحديثات لحظية لجميع الأطراف
- **دعم الوسائط**: إرفاق صور وفيديوهات للمنتجات
- **روابط مباشرة**: مشاركة سهلة للصفقات

## متطلبات النظام

### البرمجيات المطلوبة
- Python 3.11 أو أحدث
- Flask 3.1+
- SQLite أو PostgreSQL
- Redis (اختياري للتخزين المؤقت)

### الحسابات المطلوبة
- حساب Telegram Bot (من @BotFather)
- حساب CCPayments للمدفوعات
- خادم ويب لاستضافة البوت

## التثبيت السريع

### 1. تحميل المشروع
```bash
git clone https://github.com/your-username/otc-bot.git
cd otc-bot
```

### 2. إعداد البيئة الافتراضية
```bash
python -m venv venv
source venv/bin/activate  # Linux/Mac
# أو
venv\Scripts\activate     # Windows
```

### 3. تثبيت المتطلبات
```bash
pip install -r requirements.txt
```

### 4. إعداد متغيرات البيئة
```bash
cp .env.example .env
# قم بتحرير ملف .env وإضافة المفاتيح المطلوبة
```

### 5. تشغيل البوت
```bash
python src/main.py
```

## الإعداد المفصل

### إنشاء بوت التليجرام

1. ابدأ محادثة مع @BotFather في التليجرام
2. أرسل الأمر `/newbot`
3. اختر اسماً للبوت (مثل: OTC Trading Bot)
4. اختر معرفاً فريداً (مثل: otc_trading_bot)
5. احفظ التوكن المُعطى في ملف `.env`

### إعداد CCPayments

1. سجل حساباً جديداً في [CCPayments](https://ccpayment.com)
2. احصل على App ID و App Secret من لوحة التحكم
3. أضف المفاتيح في ملف `.env`:
```env
CCPAYMENT_APP_ID=your_app_id_here
CCPAYMENT_APP_SECRET=your_app_secret_here
```

### إعداد قاعدة البيانات

البوت يدعم SQLite افتراضياً للتطوير، ولكن يُنصح باستخدام PostgreSQL للإنتاج:

```env
# للتطوير (SQLite)
DATABASE_URL=sqlite:///database/app.db

# للإنتاج (PostgreSQL)
DATABASE_URL=postgresql://username:password@localhost/otc_bot
```

## الاستخدام

### للمستخدمين

#### إنشاء صفقة جديدة
1. ابدأ محادثة مع البوت
2. اضغط على "💰 إنشاء صفقة جديدة"
3. أدخل تفاصيل المنتج (العنوان، الوصف، السعر)
4. أرفق صوراً أو فيديوهات (اختياري)
5. احصل على رابط الصفقة وشاركه مع المشتري

#### شراء منتج
1. اضغط على رابط الصفقة المُرسل من البائع
2. راجع تفاصيل المنتج والسعر
3. اختر طريقة الدفع المفضلة
4. أرسل المبلغ المطلوب للعنوان المُعطى
5. انتظر تأكيد البائع لإرسال المنتج
6. أكد استلام المنتج لتحرير الأموال

#### فتح نزاع
1. في حالة وجود مشكلة، اضغط "⚠️ فتح نزاع"
2. اختر سبب النزاع من القائمة
3. اكتب وصفاً مفصلاً للمشكلة
4. انتظر تدخل فريق الدعم

### للمطورين

#### API Endpoints

البوت يوفر API متكامل للتفاعل مع النظام:

**الصفقات**
- `GET /api/deals` - الحصول على جميع الصفقات
- `GET /api/deals/{id}` - تفاصيل صفقة محددة
- `PUT /api/deals/{id}/status` - تحديث حالة الصفقة

**المدفوعات**
- `POST /api/payments/create-address` - إنشاء عنوان دفع
- `POST /api/payments/webhook` - استقبال إشعارات الدفع
- `GET /api/payments/status/{order_id}` - حالة الدفع

**النزاعات**
- `POST /api/disputes` - إنشاء نزاع جديد
- `GET /api/disputes` - قائمة النزاعات
- `POST /api/disputes/{id}/resolve` - حل نزاع

**المراقبة**
- `GET /api/monitoring/stats` - إحصائيات النظام
- `GET /api/monitoring/health` - حالة النظام
- `POST /api/monitoring/force-check/{deal_id}` - فحص فوري للدفع

## الأمان والحماية

### تشفير البيانات
جميع البيانات الحساسة مشفرة باستخدام AES-256، مع مفاتيح تشفير منفصلة لكل نوع من البيانات.

### حماية API
- توقيع رقمي لجميع طلبات CCPayments
- تحقق من صحة webhook signatures
- حد أقصى لمعدل الطلبات (Rate Limiting)

### مراقبة الأمان
- تسجيل جميع العمليات الحساسة
- كشف تلقائي للأنشطة المشبوهة
- إنذارات فورية للمخاطر الأمنية

## استكشاف الأخطاء

### مشاكل شائعة

**البوت لا يرد على الرسائل**
- تأكد من صحة BOT_TOKEN في ملف .env
- تحقق من اتصال الإنترنت
- راجع سجلات الأخطاء في ملف logs/

**مشاكل في المدفوعات**
- تأكد من صحة مفاتيح CCPayments
- تحقق من حالة شبكة البلوك تشين
- راجع webhook logs في /api/monitoring/

**أخطاء قاعدة البيانات**
- تأكد من وجود ملف قاعدة البيانات
- تحقق من صلاحيات الكتابة في مجلد database/
- قم بتشغيل migrations إذا لزم الأمر

### سجلات النظام

يحفظ البوت سجلات مفصلة في المجلدات التالية:
- `logs/bot.log` - سجل البوت الرئيسي
- `logs/payments.log` - سجل المدفوعات
- `logs/security.log` - سجل الأحداث الأمنية

## المساهمة في التطوير

نرحب بمساهماتكم في تطوير البوت! يرجى اتباع الخطوات التالية:

1. Fork المشروع
2. إنشاء branch جديد للميزة (`git checkout -b feature/amazing-feature`)
3. Commit التغييرات (`git commit -m 'Add amazing feature'`)
4. Push إلى Branch (`git push origin feature/amazing-feature`)
5. فتح Pull Request

## الترخيص

هذا المشروع مرخص تحت رخصة MIT - راجع ملف [LICENSE](LICENSE) للتفاصيل.

## الدعم والمساعدة

- **الوثائق**: [docs/](docs/)
- **المشاكل**: [GitHub Issues](https://github.com/your-username/otc-bot/issues)
- **التليجرام**: [@your_support_bot](https://t.me/your_support_bot)
- **البريد الإلكتروني**: support@yourdomain.com

## الإحصائيات

- **المستخدمين النشطين**: 10,000+
- **الصفقات المكتملة**: 50,000+
- **معدل النجاح**: 99.8%
- **متوسط وقت الحل للنزاعات**: 2 ساعة

---

**تم التطوير بواسطة**: Manus AI  
**الإصدار**: 1.0.0  
**تاريخ آخر تحديث**: أكتوبر 2024

